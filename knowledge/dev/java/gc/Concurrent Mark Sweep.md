---
aliases:
  - Concurrent Mark Sweep
  - CMS
tags:
  - –∑—Ä–µ–ª–æ—Å—Ç—å/üå±
date: "[[2023-11-06]]"
zero-link:
  - "[[00 Java —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞]]"
parents:
  - "[[Garbage Collector]]"
linked: []
---
–ü–æ—è–≤–∏–ª—Å—è –≤ [Java 7](Java%207.md) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [Generational Collection](Generational%20Collection.md).

–û—á–∏—Å—Ç–∫–∞ Young Generation –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –≤ [Parallel Compacting Collector](Parallel%20Compacting%20Collector.md) c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º [StopTheWorld](StopTheWorld.md) –∏ [–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ](Parallel%20Collection.md) [Copy Collector](Copy%20Collector.md). –ê —Å–±–æ—Ä–∫–∞ –≤ —Å—Ç–∞—Ä–æ–º –ø–æ–∫–æ–ª–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [—Ñ–æ–Ω–æ–≤—ã–π](Concurrent%20Collection.md) [Mark and Compact](Mark%20and%20Compact.md).

–û—á–∏—Å—Ç–∫–∞ Old Generation –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
- **Initial Mark.** –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ([StopTheWorld](StopTheWorld.md) –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ), –≤–æ –≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–æ—Ä–Ω–µ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã (Root GC)
- **Concurrent Mark** - GC –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–∞–±–æ—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫ –∂–∏–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–∑ —É–∂–µ –ø–æ–º–µ—á–µ–Ω–Ω—ã—Ö –∫–æ—Ä–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
- **Remark** - –ø–æ–º–µ—á–∞–µ—Ç –∂–∏–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ —É—Å–∫–æ–ª—å–∑–Ω—É—Ç—å –æ—Ç GC –≤–æ –≤—Ä–µ–º—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ñ–∞–∑—ã. –ó–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ—Ä–æ—Ç–∫–∏–π [StopTheWorld](StopTheWorld.md).
- **Concurrent Sweep** - —Ä–∞–±–æ—Ç–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è - —Å–±–æ—Ä—â–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –æ—á–∏—Å—Ç–∫—É –ø–∞–º—è—Ç–∏ –æ—Ç –º–µ—Ä—Ç–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ñ–æ–Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö. –ü—Ä–∏ —ç—Ç–æ–º –º–æ–≥—É—Ç –≤ –∂–∏–≤—ã—Ö –æ—Å—Ç–∞—Ç—å—Å—è –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Ç–∞–∫–æ–≤—ã–º–∏ —É–∂–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è - –ø–ª–∞–≤–∞—é—â–∏–π –º—É—Å–æ—Ä (floating garbage). –¢–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞.
- **Resetting** - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º—É —Å–±–æ—Ä—É

![](Pasted%20image%2020231107220238.png)

–¢–∞–∫ –∫–∞–∫ –≤ —Ç–∞–∫–æ–º —Ä–µ–∂–∏–º–µ –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –º–æ–∂–µ—Ç —Å–ª–æ–∂–∏—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –º—ã –Ω–µ —Å–º–æ–∂–µ–º –∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–æ–π –æ–±—ä–µ–∫—Ç. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–æ–ª–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ. 

**–ü–ª—é—Å—ã:**
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏. –£ –Ω–∞—Å 2 –ø–∞—É–∑—ã [StopTheWorld](StopTheWorld.md), –Ω–æ –æ–Ω–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã –∏ –ø—Ä–∏ —ç—Ç–æ–º —Å–±–æ—Ä—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö –∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
- –ú–µ—Ä—Ç–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –±–µ–∑ [StopTheWorld](StopTheWorld.md).

**–ú–∏–Ω—É—Å—ã:**
- –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU –Ω–∞ —Ñ–æ–Ω–æ–≤—É—é —Ä–∞–±–æ—Ç—É 10-15%
- –ú–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –û–ó–£. –ú—É—Å–æ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ –º—ã —Ç—Ä–∞—Ç–∏–º –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–æ–∏—Å–∫.
- –ù–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é. –≠—Ç–æ –ø–ª–æ—Ö–æ —Ç–µ–º, —á—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –±–æ–ª—å—à–æ–π –æ–±—ä–µ–∫—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –±–æ–ª—å—à–æ–π –º–∞—Å—Å–∏–≤. –¢–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞.
- [–ê–ª–ª–æ–∫–∞—Ü–∏—è](–ê–ª–ª–æ–∫–∞—Ü–∏—è.md) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º free-–ª–∏—Å—Ç–æ–≤.

**–ì–¥–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –¢–∞–∫–æ–π —Å–±–æ—Ä—â–∏–∫ —É–∂–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

**–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å:**
- `-XX:+UseConcMarkSweepGC`