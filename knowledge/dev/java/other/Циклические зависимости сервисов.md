---
aliases: 
tags:
  - –∑—Ä–µ–ª–æ—Å—Ç—å/üå±
date:
  - - 2023-11-20
zero-link:
  - "[[00 Java —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞]]"
parents: 
linked:
  - "[[SpringBoot]]"
article: https://note.struchkov.dev/sircular-service-dependencies/
---
–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–Ω–æ –≤–Ω–µ–¥—Ä—è—é—Ç—Å—è –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å –ê –≤–Ω–µ–¥—Ä—è–µ—Ç —Å–µ—Ä–≤–∏—Å –ë, –Ω–æ –≤ —Ç–æ–∂–µ –≤—Ä–µ–º—è —Å–µ—Ä–≤–∏—Å –ë –≤–Ω–µ–¥—Ä—è–µ—Ç —Å–µ—Ä–≤–∏—Å –ê. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ¬†[Spring](https://note.struchkov.dev/tag/spring/)¬†–∏¬†[Quarkus](https://note.struchkov.dev/tag/quarkus/)¬†–Ω–µ –∑–Ω–∞—é—Ç, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–∫–∏–µ –±–∏–Ω—ã –∏ –≤–Ω–µ–¥—Ä–∏—Ç—å –∏—Ö –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞.

> [!WARNING]
> –û–±—ã—á–Ω–æ —Ç–∞–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ –ø–ª–æ—Ö–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.¬†

–ü—Ä–∏–º–µ—Ä —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ Spring:

```java
@Service
public class ServiceOne {

    private final ServiceTwo serviceTwo;

    public ServiceOne(ServiceTwo serviceTwo) {
        this.serviceTwo = serviceTwo;
    }

}
```

```java
@Service
public class ServiceTwo {

    private final ServiceOne serviceOne;

    public ServiceTwo(ServiceOne serviceOne) {
        this.serviceOne = serviceOne;
    }

}
```

–í–æ—Ç —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å —ç—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å:
## –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
==–≠—Ç–æ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.==¬†–í–æ–∑–º–æ–∂–Ω–æ –≤–∞–º —Å—Ç–æ–∏—Ç —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –í, –∫–æ—Ç–æ—Ä—ã–π –≤–Ω–µ–¥—Ä–∏—Ç –≤ —Å–µ–±—è —Å–µ—Ä–≤–∏—Å—ã –ê –∏ –ë. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤—ã —Ä–∞—Å–ø—É—Ç–∞–µ—Ç–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.

```java
@Service
public class ServiceThree {

    private final ServiceOne serviceOne;
    private final ServiceTwo serviceTwo;

    public ServiceThree(ServiceOne serviceOne, ServiceTwo serviceTwo) {
        this.serviceOne = serviceOne;
        this.serviceTwo = serviceTwo;
    }
    
}
```

```java
@Service
public class ServiceOne {

}
```

```java
@Service
public class ServiceTwo {

}
```
## –õ–µ–Ω–∏–≤–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
–í Spring –≤—ã –º–æ–∂–µ—Ç–µ¬†—É–∫–∞–∑–∞—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é¬†`@Lazy`¬†—É –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –æ–¥–Ω–æ–≥–æ –∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Å–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å, –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å–ø—Ä–∏–Ω–≥ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–æ–∫—Å–∏ –∫–ª–∞—Å—Å, —Å–æ–∑–¥–∞—Å—Ç –∏–∑ –Ω–µ–≥–æ –±–∏–Ω –∏ –≤–Ω–µ–¥—Ä–∏—Ç –µ–≥–æ –≤ –≤–∞—à —Å–µ—Ä–≤–∏—Å. –ü–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–∏—Å –∏ –≤–Ω–µ–¥—Ä–∏—Ç —Ç—É–¥–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–µ—Ä–≤—ã–π. –ê –¥–∞–ª–µ–µ –∑–∞–º–µ–Ω–∏—Ç —Å—Å—ã–ª–∫—É —Å –ø—Ä–æ–∫—Å–∏ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –≤—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–∏—Å.

```java
@Service
public class ServiceTwo {

    private final ServiceOne serviceOne;

    public ServiceTwo(@Lazy ServiceOne serviceOne) {
        this.serviceOne = serviceOne;
    }

}
```

```java
@Service
public class ServiceOne {

    private final ServiceTwo serviceTwo;

    public ServiceOne(ServiceTwo serviceTwo) {
        this.serviceTwo = serviceTwo;
    }

}
```
## –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Setter
–í–Ω–µ–¥—Ä–∏—Ç—å –æ–¥–∏–Ω –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ç—Ç–µ—Ä, –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –æ–±–∞ –±–∏–Ω–∞, –∞ –ø–æ—Ç–æ–º —É–∂–µ –≤–Ω–µ–¥—Ä–∏—Ç –æ–¥–∏–Ω –≤ –¥—Ä—É–≥–æ–π.

```java
@Service
public class ServiceOne {

    private final ServiceTwo serviceTwo;

    public ServiceOne(ServiceTwo serviceTwo) {
        this.serviceTwo = serviceTwo;
    }

}
```

```java
@Service
public class ServiceTwo {

    private ServiceOne serviceOne;

    @Autowired
    public void setServiceOne(ServiceOne serviceOne) {
        this.serviceOne = serviceOne;
    }

}
```