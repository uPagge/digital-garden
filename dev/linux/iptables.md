---
aliases: 
tags:
  - maturity/üå±
date: 2024-11-03
---

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª**
- `iptables -L` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞.
- `iptables -L -v -n` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ —á–∏—Å–ª–æ–≤—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏.
- `iptables -S` ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ.

**–û—á–∏—Å—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª**
- `iptables -F` ‚Äî –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–æ –≤—Å–µ—Ö —Ü–µ–ø–æ—á–∫–∞—Ö.
- `iptables -X` ‚Äî –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ü–µ–ø–æ—á–∫–∏.
- `iptables -Z` ‚Äî –û–±–Ω—É–ª–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –±–∞–π—Ç–æ–≤.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
- `iptables -P INPUT ACCEPT` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ INPUT.
- `iptables -P FORWARD ACCEPT` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ FORWARD.
- `iptables -P OUTPUT ACCEPT` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ü–µ–ø–æ—á–∫–∏ OUTPUT.

**–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏ –∑–∞–ø—Ä–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞**
- `iptables -A INPUT -p tcp --dport <–ø–æ—Ä—Ç> -j ACCEPT` ‚Äî –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç.
- `iptables -A INPUT -s <IP> -j ACCEPT` ‚Äî –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞
- `iptables -A INPUT -p tcp --dport <–ø–æ—Ä—Ç> -j DROP` ‚Äî –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç.
- `iptables -A INPUT -s <IP> -j DROP` ‚Äî –ó–∞–ø—Ä–µ—Ç–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞.

**–£—Å–ª–æ–≤–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –∑–∞–ø—Ä–µ—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞**
- `iptables -A INPUT -p tcp -s <IP> --dport <–ø–æ—Ä—Ç> -j ACCEPT` ‚Äî –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Å IP –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—Ç.
- `iptables -A INPUT -p tcp -s <IP> --dport <–ø–æ—Ä—Ç> -j DROP` ‚Äî –ó–∞–ø—Ä–µ—Ç–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Å IP –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—Ç.

**–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª**
- `iptables -D INPUT <–Ω–æ–º–µ—Ä-–ø—Ä–∞–≤–∏–ª–∞>` ‚Äî –£–¥–∞–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –ø–æ –µ–≥–æ –Ω–æ–º–µ—Ä—É.
- `iptables -D INPUT -p tcp --dport <–ø–æ—Ä—Ç> -j ACCEPT` ‚Äî –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ.
  
**–†–∞–±–æ—Ç–∞ —Å —Ü–µ–ø–æ—á–∫–∞–º–∏**
- `iptables -N <–∏–º—è-—Ü–µ–ø–æ—á–∫–∏>` ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ü–µ–ø–æ—á–∫—É.
- `iptables -X <–∏–º—è-—Ü–µ–ø–æ—á–∫–∏>` ‚Äî –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Ü–µ–ø–æ—á–∫—É.
- `iptables -A INPUT -j <–∏–º—è-—Ü–µ–ø–æ—á–∫–∏>` ‚Äî –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ü–µ–ø–æ—á–∫–µ.

**NAT –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤**
- `iptables -t nat -A POSTROUTING -o <–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å> -j MASQUERADE` ‚Äî –í–∫–ª—é—á–∏—Ç—å NAT –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
- `iptables -t nat -A PREROUTING -p tcp --dport <–ø–æ—Ä—Ç> -j DNAT --to-destination <IP>:<–ø–æ—Ä—Ç>` ‚Äî –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ —Å –æ–¥–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ –Ω–∞ –¥—Ä—É–≥–æ–π.

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª**
- `iptables-save > /etc/iptables/rules.v4` ‚Äî –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ IPv4 –≤ —Ñ–∞–π–ª.
- `iptables-restore < /etc/iptables/rules.v4` ‚Äî –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ IPv4 –∏–∑ —Ñ–∞–π–ª–∞.

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- `iptables -A INPUT -p tcp --dport <–ø–æ—Ä—Ç> -j LOG --log-prefix "IPTables-Dropped: " --log-level 4` ‚Äî –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–±—Ä–æ—à–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã.
***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../meta/zero/00 Linux|00 Linux]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: 
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2024-11-03]]
**–ê–≤—Ç–æ—Ä**:: 
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- 

### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->

