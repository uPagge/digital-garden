---
aliases: 
tags:
  - maturity/üå±
date: 2024-06-17
---
- [[../–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤|–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤]]

**–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:**
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫**
	- **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –ë–î**: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é –º–æ—â–Ω–æ—Å—Ç—å –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—É—â–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –°–ª–∞–±–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
	- **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é**: –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ —Å–µ—Ç–∏ –∏–ª–∏ –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤ –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª—è—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
	- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**:
		- –ï—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [[PgBouncer]], —á—Ç–æ–±—ã —Ä–∞–∑–≥—Ä—É–∑–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏.
		- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ [[autovacuum]] –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è "–º—É—Å–æ—Ä–Ω—ã—Ö" —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É –ë–î.
- –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–±–æ—Ä [[../–ü–ª–æ—Ö–æ–π SQL –∑–∞–ø—Ä–æ—Å|–ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤]]
	- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥—Ä—è–¥ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –ù–∞—á–Ω–∏—Ç–µ —Å —Å–∞–º—ã—Ö –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö, —á—Ç–æ–±—ã –¥–æ–±–∏—Ç—å—Å—è –Ω–∞–∏–±–æ–ª—å—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è.
	- **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π –ë–î**, —Ç–∞–∫ –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ä–µ–¥—ã –º–æ–≥—É—Ç –Ω–µ –æ—Ç—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.
	- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞**:
		- [pg_utils](pg_utils.md): —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ PostgreSQL.
		- [[pg_stat_statements]]: —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.
		- [[–¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ pg_stats|pg_stats]]: –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å.
		- [[pageinspect]]: –¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å—Ç—Ä–∞–Ω–∏—Ü —Ç–∞–±–ª–∏—Ü –∏ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [[–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PostgreSQL|–ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PostgreSQL]] –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç –∏ —Ç–æ—á–µ–∫, —Ç—Ä–µ–±—É—é—â–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
- **–ò–∑—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç.
- **–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞**. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Äî —ç—Ç–æ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å–Ω–æ–≤–∞ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ –∏—â–∏—Ç–µ –Ω–æ–≤—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PostgreSQL**
- `work_mem`: —É–≤–µ–ª–∏—á—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–∏—Ö —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ–∫ –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏.
- `shared_buffers`: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ –∏ —Å–Ω–∏–∂–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –¥–∏—Å–∫—É.
- `maintenance_work_mem`: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏, –≤—ã–¥–µ–ª—è–µ–º–æ–π –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ `VACUUM` –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤.

![–ü–æ—á–µ–º—É JOIN —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ?](JOIN%20SQL.md#–ü–æ—á–µ–º—É%20JOIN%20—Ä–∞–±–æ—Ç–∞–µ—Ç%20–º–µ–¥–ª–µ–Ω–Ω–æ?)

![–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ IN](IN%20SQL.md#–ü—Ä–æ–±–ª–µ–º—ã%20–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏%20IN)

PostgreSQL —Ö—Ä–∞–Ω–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è–º –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ `pg_stat_user_tables`. –° –µ—ë –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ PostgreSQL –≤—ã–ø–æ–ª–Ω—è–µ—Ç —á–∞—â–µ –≤—Å–µ–≥–æ.

```sql
select relname, seq_scan, idx_scan, vacuum_count from pg_stat_user_tables
```
***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../../meta/zero/00 PostgreSQL|00 PostgreSQL]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: [[../–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤|–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤]]
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–ê–≤—Ç–æ—Ä**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2024-06-17]]
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PostgreSQL / –ò–ª—å—è –ö–æ—Å–º–æ–¥–µ–º—å—è–Ω—Å–∫–∏–π (PostgreSQL Consulting) - YouTube](https://www.youtube.com/watch?v=c-ySk8COI1c)
### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->
<!-- SerializedQuery: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->
- [[pageinspect]]
- [[pg_stat_statements]]
- [[–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PostgreSQL]]
- [[–¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ pg_stats]]
- [[–ß–∞—Å—Ç–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å]]
<!-- SerializedQuery END -->
