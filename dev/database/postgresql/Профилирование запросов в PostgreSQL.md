---
aliases:
  - explain
tags:
  - maturity/üå±
date: 2024-06-10
---
–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `EXPLAIN` –ø–µ—Ä–µ–¥ SQL-–∑–∞–ø—Ä–æ—Å–æ–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫–∞–∫ PostgreSQL **–ø–ª–∞–Ω–∏—Ä—É–µ—Ç** –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º". –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≥–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `EXPLAIN`
```sql
postgres=# EXPLAIN SELECT * FROM users WHERE id = 20;

QUERY PLAN
-------------------------------------------------------
Index Scan using users_pkey on users (cost=0.15..8.17 rows=1 width=72)
	Index Cond: (id = 20)
(2 rows)
```

–í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
```sql
EXPLAIN (FORMAT JSON) SELECT * FROM users WHERE id = 20;
```

> [!NOTE] Analyze
> `EXPLAIN` –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–∞–º –∑–∞–ø—Ä–æ—Å, –ø–æ—ç—Ç–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–º–∏. –î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `ANALYZE`, –∏ —Ç–æ–≥–¥–∞ `EXPLAIN` —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω–∏—Ç –∑–∞–ø—Ä–æ—Å.
## –°—Ç–æ–∏–º–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (cost)
PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å–ª–æ–≤–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ ‚Äî `cost`. –û–¥–∏–Ω `cost` –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–º—É –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π [[../DB page|—Å—Ç—Ä–∞–Ω–∏—Ü—ã]] –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ (Seq Scan).

–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è `cost`:
- **–ü–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ –Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
- **–í—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: –ø–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.

–ï—Å–ª–∏ –æ—Ü–µ–Ω–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `rows` —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ–µ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å—Ç—Ä–æ–∫, —ç—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —É—Å—Ç–∞—Ä–µ–ª–∞. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `ANALYZE` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.

–¢–∞–∫–∂–µ PostgreSQL —É–º–µ–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –¥–∏—Å–∫—É. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é `buffres`: `explain (analize, buffres)`. –≠—Ç–æ –Ω–µ –≤—Ä–µ–º—è –Ω–∞ —á—Ç–µ–Ω–∏–µ, –∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏–π.
## –í–∏–¥—ã –ø—Ä–æ—Ö–æ–¥–æ–≤ –ø–æ —Ç–∞–±–ª–∏—Ü–µ –∏ –∏–Ω–¥–µ–∫—Å—É
- **Seq Scan**: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã. –≠—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏ –æ–±—ã—á–Ω–æ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª–µ–Ω. –†–µ—à–µ–Ω–∏–µ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å [[../–ò–Ω–¥–µ–∫—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö|–∏–Ω–¥–µ–∫—Å]], —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö.
- **Index Scan**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [[../–ò–Ω–¥–µ–∫—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö|–∏–Ω–¥–µ–∫—Å–∞]] –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã.
- **Index Only Scan**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [[../–ü–æ–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å|–ø–æ–∫—Ä—ã–≤–∞—é—â–µ–≥–æ –∏–Ω–¥–µ–∫—Å–∞]], –∫–æ–≥–¥–∞ –≤—Å–µ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∏–Ω–¥–µ–∫—Å–µ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ.
- **Bitmap Heap Scan**: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏—Ç–æ–≤—ã—Ö –∫–∞—Ä—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞. –°–Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ—è—Ç—Å—è –±–∏—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤, –∑–∞—Ç–µ–º –æ–Ω–∏ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç—Å—è.
- **Foreign Scan**: —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –ø—Ä–∏ [[–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ PostgreSQL|—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–∏]].

***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../../meta/zero/00 PostgreSQL|00 PostgreSQL]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: [[–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ PostgreSQL]]
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–ê–≤—Ç–æ—Ä**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2024-01-29]]
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- 
### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->

