---
aliases:
  - AOF
  - appendonly
tags:
  - maturity/üå±
date: 2024-10-07
zero-link: 
parents: 
linked:
---
–í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ appendonly –ø–æ–∑–≤–æ–ª—è–µ—Ç Redis –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–ø–∏—Å—ã–≤–∞—è –∫–∞–∂–¥—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª –≤ —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –∑–Ω–∞—Ç—å.

![[../../../meta/files/images/Pasted image 20241103222301.png]]

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç AOF:**
- **–õ–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –ö–æ–≥–¥–∞ appendonly –≤–∫–ª—é—á–µ–Ω, Redis –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∂–¥—É—é –∫–æ–º–∞–Ω–¥—É, –∏–∑–º–µ–Ω—è—é—â—É—é —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, SET, DEL, LPUSH), –≤ —Ñ–∞–π–ª AOF, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏.
- **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ (append), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤—ã–ø–æ–ª–Ω—è—è –≤—Å–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –ø–æ—Ä—è–¥–∫—É, –µ—Å–ª–∏ Redis –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**: –í —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Redis (redis.conf) –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∂–∏–º–æ–≤, –∫–∞–∫ —á–∞—Å—Ç–æ Redis –¥–æ–ª–∂–µ–Ω —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª:
	- appendfsync always ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –Ω–æ –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫).
	- appendfsync everysec ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é).
	- appendfsync no ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AOF:**
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: AOF –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —á–µ–º –º–µ—Ö–∞–Ω–∏–∑–º RDB (Redis Database Backup), –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –¥–∞–º–ø—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏.
- **–ì–∏–±–∫–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**: –í —Å–ª—É—á–∞–µ —Å–±–æ—è Redis –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥—è –∫–æ–º–∞–Ω–¥—ã –∏–∑ AOF, —á—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö.
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å —Ñ–∞–π–ª–∞**: AOF-—Ñ–∞–π–ª ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–≥–∫–æ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è.

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- **–†–æ—Å—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞**: –°–æ –≤—Ä–µ–º–µ–Ω–µ–º —Ñ–∞–π–ª AOF –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Ä–∞—Å—Ç–∏, —Ç–∞–∫ –∫–∞–∫ –≤ –Ω–µ–º —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, Redis –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é ‚Äú–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è‚Äù AOF-—Ñ–∞–π–ª–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω —Å–∂–∏–º–∞–µ—Ç —Ñ–∞–π–ª, —É–¥–∞–ª—è—è –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –¥–∞–Ω–Ω—ã—Ö.
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫, —á–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø–∏—Å–∏ –≤ AOF –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ appendfsync always).
***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../../meta/zero/00 Redis|00 Redis]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: 
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2024-10-07]]
**–ê–≤—Ç–æ—Ä**:: 
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- [[Redis Database Backup]]

### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->

