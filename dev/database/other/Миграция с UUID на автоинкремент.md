---
aliases: 
tags:
  - maturity/üå±
date: 2025-02-18
---
–í —ç—Ç–æ–π –∑–∞–º–µ—Ç–∫–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ —Å [[../../Universal Unique IDentifier|UUID]] –Ω–∞ [[–ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –≤ –ë–î]]

–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ù–µ—Ç –ª–∏ –≤ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π (FK), —Å—Å—ã–ª–∞—é—â–∏—Ö—Å—è –Ω–∞ —Å—Ç–∞—Ä—É—é –∫–æ–ª–æ–Ω–∫—É UUID.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, API, —Å–∫—Ä–∏–ø—Ç—ã: –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏ –æ–Ω–∏ —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å—Ç–∞—Ä—ã–π —Ç–∏–ø –∫–ª—é—á–∞ –∏–ª–∏ –µ–≥–æ —Ñ–æ—Ä–º–∞—Ç.

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞
- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É —Å —Ç–∏–ø–æ–º `BIGINT` (–∏–ª–∏ `BIGSERIAL`, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PostgreSQL).
- –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```sql
CREATE SEQUENCE your_table_id_seq;
```

–ù–∞–∑–Ω–∞—á—å—Ç–µ —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ `DEFAULT`, —á—Ç–æ–±—ã –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```sql
ALTER TABLE your_table
    ALTER COLUMN temp_id SET DEFAULT nextval('your_table_id_seq');
```

–°–¥–µ–ª–∞–π—Ç–µ –∫–æ–ª–æ–Ω–∫—É `NOT NULL` (–µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≤ –Ω–µ–π –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ–ø—É—Å–∫–æ–≤):

```sql
ALTER TABLE your_table
    ALTER COLUMN temp_id SET NOT NULL;
```

–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ (–±—ç–∫—Ñ–∏–ª). –û–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏, —á—Ç–æ–±—ã —É –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –ø–æ—è–≤–∏–ª–æ—Å—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
```sql
UPDATE your_table
   SET temp_id = nextval('your_table_id_seq');
```

> [!WARNING] 
> –ï—Å–ª–∏ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è), –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π.

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π –∫–ª—é—á
- –£–¥–∞–ª–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏, –µ—Å–ª–∏ –æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞–ª–∏ –Ω–∞ —Å—Ç–∞—Ä—É—é –∫–æ–ª–æ–Ω–∫—É-–∫–ª—é—á.
- –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Å—Ç–∞—Ä—É—é –∫–æ–ª–æ–Ω–∫—É:

```sql
ALTER TABLE your_table DROP COLUMN old_uuid_column;
```
–∏–ª–∏:
```sql
ALTER TABLE your_table RENAME COLUMN old_uuid_column TO uuid_backup;
```

–ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ `temp_id` –≤ `id`:
```sql
ALTER TABLE your_table
    RENAME COLUMN temp_id TO id;
```

–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á:
```sql
ALTER TABLE your_table
    ADD CONSTRAINT your_table_pkey PRIMARY KEY (id);
```

- –ï—Å–ª–∏ –±—ã–ª–∏ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä—ã–π UUID, –æ–±–Ω–æ–≤–∏—Ç–µ –∏—Ö –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ, —Å—Å—ã–ª–∞—é—â–∏–µ—Å—è –Ω–∞ –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É.
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: —Ç–∞–º, –≥–¥–µ —Ä–∞–Ω—å—à–µ –æ–∂–∏–¥–∞–ª—Å—è UUID, —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç —á–∏—Å–ª–æ. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ —Å—Ö–µ–º—ã, DTO, —Å–µ—Ä–≤–∏—Å—ã –∏ —Ç. –ø.
### –ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏ —Å Liquibase
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ —Å –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–æ–º
```xml
<changeSet id="1" author="dev">
    <addColumn tableName="your_table">
        <column name="temp_id" type="BIGINT" autoIncrement="true"/>
    </addColumn>
</changeSet>
```

–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
```xml
<changeSet id="2" author="dev">
    <sql>UPDATE your_table SET temp_id = nextval('your_table_id_seq');</sql>
</changeSet>
```

–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ UUID –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
```xml
<changeSet id="3" author="dev">
    <dropPrimaryKey tableName="your_table" constraintName="your_table_pkey"/>
    <dropColumn tableName="your_table" columnName="old_uuid_column"/>
    <renameColumn tableName="your_table" oldColumnName="temp_id" newColumnName="id"/>
    <addPrimaryKey tableName="your_table" columnNames="id" constraintName="your_table_pkey"/>
</changeSet>
```
***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../../meta/zero/00 –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö|00 –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: 
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2025-02-18]]
**–ê–≤—Ç–æ—Ä**:: 
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- 

### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->

