---
aliases: 
tags:
  - maturity/üå±
  - content/problem
date: 2025-02-04
---
–í –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç —è –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –º–æ–π —Å–µ—Ä–≤–µ—Ä (–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä:¬†2 core¬† –ü–∞–º—è—Ç—å:¬†4 Gb¬†¬†–•—Ä–∞–Ω–∏–ª–∏—â–µ:¬†60 Gb) –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—â–µ–Ω–∞ Gitea —Å—Ç–∞–ª –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤.

```
top -o %CPU -b -n 1 | head -20
```

C—É–¥—è –ø–æ top, –æ—Å–Ω–æ–≤–Ω—ã–º –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–º CPU —è–≤–ª—è–µ—Ç—Å—è Gitea, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–Ω–∏–º–∞–µ—Ç 22,7% CPU –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 61,6% –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –¢–∞–∫–∂–µ —É–≤–∏–¥–µ–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ git, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω—ã Gitea –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –∏ –æ–Ω–∏ —Ç–æ–∂–µ –Ω–∞–≥—Ä—É–∂–∞—é—Ç CPU.

–°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º —è –ø—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```
docker logs --tail 50 gitea
```

–ü–æ –ª–æ–≥–∞–º —É–≤–∏–¥–µ–ª, —á—Ç–æ —É –º–µ–Ω—è –º–Ω–æ–≥–æ **–º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (slow GET)**, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å:
1.	–û–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–º–º–∏—Ç–æ–≤ –∏ blame (–∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤)
2.	–î–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–∞–π–ª–∞–º –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
3.	–†–∞–±–æ—Ç–æ–π —Å RSS –∏ raw-—Ñ–∞–π–ª–∞–º–∏
4.	–ó–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–∞ –ø–æ–∏—Å–∫ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å 404-–æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —á–∞—Å—Ç—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º.

–î–∞–ª–µ–µ —è –ø—Ä–æ–≤–µ—Ä–∏–ª –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Gitea

```
docker exec -it gitea top -b -n 1
```

Gitea –∞–∫—Ç–∏–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è–ª–∞ –º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Git, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å read-tree, rev-list, cat-file, check-attr –∏ batch-check. –≠—Ç–æ –≥–æ–≤–æ—Ä–∏–ª–æ –æ —Ç–æ–º, —á—Ç–æ Gitea –ª–∏–±–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã, –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º:
- read-tree ‚Üí –ß—Ç–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
- log -1 ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞ –¥–ª—è —Ñ–∞–π–ª–∞.
- cat-file --batch ‚Üí –î–æ—Å—Ç—É–ø –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Ñ–∞–π–ª–æ–≤.

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–æ:
1. [[–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ Gitea|–§–æ–Ω–æ–≤—ã–º–∏ –∑–∞–¥–∞—á–∏ Gitea]].
2. **–ó–∞–ø—Ä–æ—Å–∞–º–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Gitea —á–µ—Ä–µ–∑ UI. –ù–æ —É –º–µ–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π Git —Ö–æ—Å—Ç–∏–Ω–≥, –Ω–∏–∫—Ç–æ –∫—Ä–æ–º–µ –º–µ–Ω—è –∏–º –Ω–µ –ø–æ–ª—å–∑—É–µ—Ç—Å—è.
3. **–ó–∞–ø—Ä–æ—Å—ã –æ—Ç –±–æ—Ç–æ–≤** - –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –ø–∞—Ä—Å–µ—Ä—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Gitea –Ω–µ –º–Ω–æ–≥–æ.
4. **Webhooks –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏** ‚Äî –µ—Å–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å Gitea. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É –º–µ–Ω—è –±—ã–ª–∞ —Ç–æ–ª—å–∫–æ —Å Drone CI, –∫–æ—Ç–æ—Ä–∞—è –≤—Ä—è–¥ –ª–∏ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É.



–ü–µ—Ä–µ–¥ –¥–∞–ª—å–Ω–µ–π—à–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º, —è —Ä–µ—à–∏–ª –ø—Ä–æ–≤–µ—Å—Ç–∏ [[–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ Gitea|—Å–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É Gitea]]. –ù–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω—ã.
## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
–Ø —Ä–µ—à–∏–ª, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ [[–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ Gitea|—Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á–∞—Ö Gitea]]. –¢–µ–º –±–æ–ª–µ–µ, —á—Ç–æ —É –º–µ–Ω—è –±—ã–ª–æ –º–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∑–µ—Ä–∫–∞–ª, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—è–≥–∏–≤–∞–ª–∏—Å—å —Å GitHub. –¢–∞–∫ —á—Ç–æ –º–æ–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ Gitea. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–º, –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ UI.

```
curl -X GET "http://localhost:3000/api/v1/admin/cron" -H "Authorization: token YOUR_ACCESS_TOKEN"
```

–î–∞–ª–µ–µ —è –æ—Ç–∫–ª—é—á–∏–ª —Å–Ω–∞—á–∞–ª–∞ –≤—Å–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏ –æ—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ. –ò –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ —ç—Ç–æ –ø–æ–º–æ–≥–ª–æ.

–û–¥–Ω–∞–∫–æ —Å–ø—É—Å—Ç—è —á–∞—Å Gitea —Å–Ω–æ–≤–∞ –ø–æ—Ç—Ä–µ–±–ª—è–ª–∞ CPU (41,2%) –∏ –ø–∞–º—è—Ç—å (13,7%). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–Ω–æ–≤–∞ –±—ã–ª –∑–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å git (17,6% CPU), —á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª–æ –æ —Ç–æ–º, —á—Ç–æ Gitea –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∫–∏–µ-—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏. –•–æ—Ç—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç—Ç–æ –≤—Ä–µ–º—è –Ω–µ –±—ã–ª–æ.
## –ó–∞–ø—Ä–æ—Å—ã –æ—Ç –±–æ—Ç–æ–≤
–ö–∞–∫ —è —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª —ç—Ç–æ –º–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π Git —Ö–æ—Å—Ç–∏–Ω–≥, —Ç–∞–∫ —á—Ç–æ –∏–º –ø–æ–ª—å–∑—É—é—Å—å —Ç–æ–ª—å–∫–æ —è. –ù–æ –æ–Ω –ø—É–±–ª–∏—á–Ω—ã–π, –∏ —è –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª, —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –∫–∞–∫–∏–µ-—Ç–æ –ø–∞—Ä—Å–µ—Ä—ã –º–æ–≥—É—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ –Ω–∞–¥–µ–∂–¥–µ –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å —Å–ª—É—á–∞–π–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞. 

–Ø —Ä–µ—à–∏–ª –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç—É –≥–∏–ø–æ—Ç–µ–∑—É.




***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../../meta/zero/00 Gitea|00 Gitea]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: 
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2025-02-04]]
**–ê–≤—Ç–æ—Ä**:: 
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- 

### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->

