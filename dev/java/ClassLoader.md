---
aliases:
  - Class Loader
  - Class Loaders
tags:
  - maturity/üå±
date: 2024-11-04
---
## –¢–µ–∑–∏—Å—ã
- Classloader ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç JVM, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –∫–ª–∞—Å—Å–æ–≤ –≤ –ø–∞–º—è—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.
- Classloader –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É, –ø—Ä–æ–≤–µ—Ä–∫—É, —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–ª–∞—Å—Å–æ–≤.
- –í Java —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—è Classloader: Bootstrap, Extension (Platform), –∏ Application (System).
- –ö–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ Classloader, —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∏–ª–∏ –ø–ª–∞–≥–∏–Ω–æ–≤.
***

Classloader ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç [[Java Virtual Machine|JVM]], –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –∫–ª–∞—Å—Å–æ–≤ –≤ –ø–∞–º—è—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã. –í Java –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω –≤ –ø–∞–º—è—Ç—å –ø–µ—Ä–µ–¥ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º, –∏ –∏–º–µ–Ω–Ω–æ Classloader –≤—ã–ø–æ–ª–Ω—è–µ—Ç —ç—Ç—É –∑–∞–¥–∞—á—É.

**–§—É–Ω–∫—Ü–∏–∏ Classloader**
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–ª–∞—Å—Å–æ–≤**: Classloader –Ω–∞—Ö–æ–¥–∏—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –∫–ª–∞—Å—Å–æ–≤ (–æ–±—ã—á–Ω–æ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.class`) –∏–∑ classpath –≤ –ø–∞–º—è—Ç—å.
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Å–æ–≤**: –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ Classloader –ø—Ä–æ–≤–µ—Ä—è–µ—Ç [[Java –±–∞–π—Ç-–∫–æ–¥|–±–∞–π—Ç-–∫–æ–¥]] –∫–ª–∞—Å—Å–∞ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –µ–≥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
3. **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤**: Classloader —Å–≤—è–∑—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Å—ã–ª–æ–∫ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤.
4. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–æ–≤**: Classloader –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã, –≤—ã–∑—ã–≤–∞—è –∏—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

**–ò–µ—Ä–∞—Ä—Ö–∏—è Classloader**
- **Bootstrap ClassLoader**: –ë–∞–∑–æ–≤—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –∫–ª–∞—Å—Å–æ–≤, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ JVM. –û–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã Java –∏–∑ —Ñ–∞–π–ª–∞ rt.jar, —Ç–∞–∫–∏–µ –∫–∞–∫ –∫–ª–∞—Å—Å—ã –∏–∑ `java.lang`, `java.util` –∏ –¥—Ä—É–≥–∏—Ö. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –Ω–∞—Ç–∏–≤–Ω–æ–º —è–∑—ã–∫–µ –∏ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —è–¥—Ä–∞ JVM.
- **Extension ClassLoader (Platform ClassLoader)**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∞—Å—Å—ã –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π Java, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `jre/lib/ext` –∏–ª–∏ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `java.ext.dirs`. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `jre/lib/ext` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Java, –∞ –±–æ–ª–µ–µ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥. –°–∞–º –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Bootstrap ClassLoader.
- **Application ClassLoader (System ClassLoader)**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–ª–∞—Å—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ classpath. –û–±—ã—á–Ω–æ —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `CLASSPATH` –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `-cp`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫.

–ü—Ä–∏–º–µ—Ä:
```java
public class Main {
    public static void main(String[] args) {
        ClassLoader classLoader = Main.class.getClassLoader();
        System.out.println("ClassLoader: " + classLoader);

        try {
            Class<?> aClass = classLoader.loadClass("Example");
            System.out.println("Class loaded: " + aClass.getName());
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Classloader –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–Ω –ø–æ–ª–µ–∑–µ–Ω –≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–ª–∏ –º–æ–¥—É–ª–µ–π, –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö –Ω–∞ –ª–µ—Ç—É.
## –ö–∞—Å—Ç–æ–º–Ω—ã–π Classloader
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ Classloader, —Ä–∞—Å—à–∏—Ä—è—è –∫–ª–∞—Å—Å `java.lang.ClassLoader`, –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Å–µ—Ç–∏ –∏–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤). –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –º–æ–¥—É–ª–∏ –∏–ª–∏ –ø–ª–∞–≥–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞—Å—Ç–æ–º–Ω—ã–π Classloader –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞–≥–∏–Ω–æ–≤, –≥–¥–µ –ø–ª–∞–≥–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```java
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Paths;

public class CustomClassLoader extends ClassLoader {

    @Override
    public Class<?> findClass(String name) throws ClassNotFoundException {
        try {
            byte[] bytes = loadClassData(name);
            return defineClass(name, bytes, 0, bytes.length);
        } catch (IOException e) {
            throw new ClassNotFoundException(name, e);
        }
    }

    private byte[] loadClassData(String name) throws IOException {
        String path = name.replace('.', '/') + ".class";
        InputStream inputStream = Files.newInputStream(Paths.get(path));
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        int data;
        while ((data = inputStream.read()) != -1) {
            byteArrayOutputStream.write(data);
        }
        return byteArrayOutputStream.toByteArray();
    }
}
```

- –ú—ã —Ä–∞—Å—à–∏—Ä—è–µ–º `ClassLoader` –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Ç–æ–¥ `findClass`.
- –ú–µ—Ç–æ–¥ `loadClassData` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–∞ –∏–∑ —Ñ–∞–π–ª–∞.
- –ú–µ—Ç–æ–¥ `defineClass` —Å–æ–∑–¥–∞–µ—Ç –∫–ª–∞—Å—Å –∏–∑ –±–∞–π—Ç–æ–≤–æ–≥–æ –º–∞—Å—Å–∏–≤–∞.
***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../meta/zero/00 Java —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞|00 Java —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: [[Class Loader Subsystem|Class Loader Subsystem]]
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2024-11-04]]
**–ê–≤—Ç–æ—Ä**:: 
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- 

### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->

