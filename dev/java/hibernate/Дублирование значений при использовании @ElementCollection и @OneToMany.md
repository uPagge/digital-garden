---
aliases: 
tags:
  - maturity/üå±
date:
  - - 2024-09-06
zero-link:
  - "[[../../../meta/zero/00 Hibernate|00 Hibernate]]"
parents: 
linked:
---
–°—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º `@ElementCollection` –≤ —Å–≤—è–∑–∫–µ —Å `@OneToMany`. –ú–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è —Ç–∞–∫, —á—Ç–æ –≤ `@OneToMany` –±—É–¥–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑-–∑–∞ `@ElementCollection`. –ü—Ä–æ—â–µ –æ–±—ä—è—Å–Ω–∏—Ç—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ.

–î–æ–ø—É—Å—Ç–∏–º —É –Ω–∞—Å –µ—Å—Ç—å —Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã: `user`, `user_nickname`, `address`. –ï—Å—Ç—å —Å—É—â–Ω–æ—Å—Ç—å `User`:

```java
@Entity
public class User {

    // ... ... ... ... ...

    @OneToMany(mappedBy = "user", fetch = FetchType.EAGER)
    private List<Address> stages = new ArrayList<>();

    @ElementCollection(fetch = FetchType.EAGER)
    @CollectionTable(
            name = "user_nickname",
            joinColumns = @JoinColumn(name = "user_id")
    )
    @Column(name = "nickname")
    private Set<String> nicknames = new HashSet<>();

    // ... ... ... ... ...

}
```

–î–æ–ø—É—Å—Ç–∏–º —É –Ω–∞—Å –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –ø—Ä–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å —Ç—Ä–∏ –∞–¥—Ä–µ—Å–∞ –∏ –æ–¥–∏–Ω –Ω–∏–∫–Ω–µ–π–º. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—Å–µ —Ö–æ—Ä–æ—à–æ, –≤—Å–µ –ø—Ä–∏–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

==–î–æ–±–∞–≤–∏–º —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –µ—â–µ –æ–¥–∏–Ω –Ω–∏–∫–Ω–µ–π–º. –¢–µ–ø–µ—Ä—å –º—ã –ø–æ–ª—É—á–∞–µ–º —à–µ—Å—Ç—å –∞–¥—Ä–µ—Å–æ–≤ –∏ –¥–≤–∞ –Ω–∏–∫–Ω–µ–π–º–∞. –û—Ç–∫—É–¥–∞ –≤–∑—è–ª–∏—Å—å –µ—â–µ —Ç—Ä–∏ –ª–∏—à–Ω–∏—Ö –∞–¥—Ä–µ—Å–∞, –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏—Ö –≤—Å–µ –µ—â–µ —Ç—Ä–∏.== –≠—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç—ã. –ü—Ä–∏ —ç—Ç–æ–º, –µ—Å–ª–∏ –≤—ã –≤–æ—Å–ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π JPA, —Ç–æ –¥—É–±–ª–µ–π —É–∂–µ –Ω–µ –±—É–¥–µ—Ç. It is magic üí´

–ú–∞–≥–∏–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –∫–∞–∫ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –Ω–µ—Ç. –û–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `FetchType.EAGER` —É `@OneToMany` –≤ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ —Å `@ElementCollection(fetch = FetchType.EAGER)`. Hibernate –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –¥–≤—É–º—è-—Ç—Ä–µ–º—è –ø–æ–ª–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏, –æ—Ç—Å—é–¥–∞ –∏ –±–µ—Ä—É—Ç—Å—è –¥—É–±–ª–∏. –ü—Ä–∏ —ç—Ç–æ–º –≤ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ Hibernate –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∂–æ–π–Ω—ã, –∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—É—á—É —Å–µ–ª–µ–∫—Ç–æ–≤, –æ—Ç—Å—é–¥–∞ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–µ–π –ø—Ä–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.

–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

- –ü–µ—Ä–µ–¥–µ–ª–∞–π—Ç–µ `List` –≤ `Set` —É `@OneToMany`.
- –£–±–µ—Ä–∏—Ç–µ `FetchType.EAGER` —É `@OneToMany`.
- –î–æ–±–∞–≤—å—Ç–µ `@Fetch(FetchMode.SUBSELECT)` —É `@OneToMany`. —ç—Ç–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è Hibernate, –∫–æ—Ç–æ—Ä–∞—è –≤–º–µ—Å—Ç–æ JOIN –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–¥–∑–∞–ø—Ä–æ—Å. –û [–ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö —è –ø–∏—Å–∞–ª –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç—å–µ](https://struchkov.dev/blog/ru/select-subquery).
***
## –ú–µ—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–û–±–ª–∞—Å—Ç—å**:: [[../../../meta/zero/00 Hibernate|00 Hibernate]]
**–†–æ–¥–∏—Ç–µ–ª—å**:: 
**–ò—Å—Ç–æ—á–Ω–∏–∫**:: 
**–ê–≤—Ç–æ—Ä**:: 
**–°–æ–∑–¥–∞–Ω–∞**:: [[2024-09-06]]
### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- 
### –î–æ—á–µ—Ä–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
<!-- QueryToSerialize: LIST FROM [[]] WHERE contains(–†–æ–¥–∏—Ç–µ–ª—å, this.file.link) or contains(parents, this.file.link) -->
