---
aliases: 
tags:
  - –∑—Ä–µ–ª–æ—Å—Ç—å/üå±
date:
  - - 2024-04-03
zero-link:
  - "[[00 Nginx]]"
parents: 
linked:
---
–í–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `http` –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –±–ª–æ–∫ `upstream`, –≥–¥–µ –≤—ã –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã, –º–µ–∂–¥—É –∫–æ—Ç–æ—Ä—ã–º–∏ –±—É–¥–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä:

```
upstream myapp {
	server server1.example.com;
	server server2.example.com;
	server server3.example.com;
}
```

–í–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `server` –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `location`, —á—Ç–æ–±—ã –æ–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–ª –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–∞—à–µ–º—É –±–ª–æ–∫—É `upstream`. –ù–∞–ø—Ä–∏–º–µ—Ä:

```
server {
    listen 80;

    location / {
        proxy_pass http://myapp;
    }
}
```

**–í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏**: nginx –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏, –≤–∫–ª—é—á–∞—è round-robin (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), least-connected –∏ ip-hash. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥, –¥–æ–±–∞–≤–∏–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –¥–∏—Ä–µ–∫—Ç–∏–≤—É –≤ –±–ª–æ–∫ `upstream`. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞ least-connected –¥–æ–±–∞–≤—å—Ç–µ `least_conn;` –≤ –≤–∞—à –±–ª–æ–∫ `upstream`