---
aliases: 
tags:
  - –∑—Ä–µ–ª–æ—Å—Ç—å/üå±
date:
  - - 2024-04-07
zero-link:
  - "[[00 Nginx]]"
parents: 
linked: 
link: https://struchkov.dev/blog/ru/nginx-optimization/#%D1%81%D0%B6%D0%B0%D1%82%D0%B8%D0%B5-gzip
---
–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —É—Å–∫–æ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç –≤–∞—à–µ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ nginx - —ç—Ç–æ –≤–∫–ª—é—á–∏—Ç—å gzip —Å–∂–∞—Ç–∏–µ. gzip –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∂–∞—Ç–∏–µ –±–µ–∑ –ø–æ—Ç–µ—Ä—å, –∏–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–µ. –û–Ω –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–µ¬†[DEFLATE](https://ru.wikipedia.org/wiki/Deflate), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞¬†[LZ77](https://ru.wikipedia.org/wiki/LZ77)¬†–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞¬†[–•–∞—Ñ—Ñ–º–∞–Ω–∞](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%B4_%D0%A5%D0%B0%D1%84%D1%84%D0%BC%D0%B0%D0%BD%D0%B0).

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç gzip. –ö–æ–≥–¥–∞ gzip-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–ª–∏–µ–Ω—Ç/–≤–µ–±-–±—Ä–∞—É–∑–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å —É —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Gzip, —Å–µ—Ä–≤–µ—Ä —Å–∂–∏–º–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ–±—Ä–∞—Ç–Ω–æ –∫–ª–∏–µ–Ω—Ç—É.

–û–±—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Gzip-—Å–∂–∞—Ç–∏—è –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º. –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏¬†`/etc/nginx/nginx.conf`¬†–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –≤ –±–ª–æ–∫ server.

```nginx
http {
  ...

    gzip                on;
    gzip_min_length     500;
    gzip_vary           on;
    gzip_proxied        expired no-cache no-store private auth;
    gzip_types          text/plain text/css text/javascript application/javascript application/x-javascript text/xml application/xml application/xml+rss application/json;
    gzip_disable        "msie6";
    gzip_comp_level 6;
    gzip_buffers 16 8k;

  ...
}
```

`gzip`¬†–≤–∫–ª—é—á–∞–µ—Ç —Å–∂–∞—Ç–∏–µ.

`gzip_min_length`¬†—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Å–∂–∞—Ç–∏–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –Ω–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –ø–æ—Å—Ç–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–∂–∞—Ç–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–∞.

`gzip_vary`¬†- –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Å–∂–∞—Ç—ã–µ, —Ç–∞–∫ –∏ –æ–±—ã—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —Ä–µ—Å—É—Ä—Å–∞.

`gzip_proxied`¬†–†–∞–∑—Ä–µ—à–∞–µ—Ç –∏–ª–∏ –∑–∞–ø—Ä–µ—â–∞–µ—Ç —Å–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–∞ –º–µ—Ç–æ–¥–æ–º gzip –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞. –¢–æ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—è ‚ÄúVia‚Äù –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞. –í –¥–∏—Ä–µ–∫—Ç–∏–≤–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

> [!NOTE]- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `gzip_proxied`
> - `off` –∑–∞–ø—Ä–µ—â–∞–µ—Ç —Å–∂–∞—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã;
> - `expired` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –µ—Å—Ç—å –ø–æ–ª–µ ‚ÄúExpires‚Äù —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ;
> - `no-cache` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –µ—Å—Ç—å –ø–æ–ª–µ ‚ÄúCache-Control‚Äù —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º ‚Äú`no-cache`‚Äù;
> - `no-store` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –µ—Å—Ç—å –ø–æ–ª–µ ‚ÄúCache-Control‚Äù —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º ‚Äú`no-store`‚Äù;
> - `private` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –µ—Å—Ç—å –ø–æ–ª–µ ‚ÄúCache-Control‚Äù —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º ‚Äú`private`‚Äù;
> - `no_last_modified` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç –ø–æ–ª—è ‚ÄúLast-Modified‚Äù;
> - `no_etag` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç –ø–æ–ª—è ‚ÄúETag‚Äù;
> - `auth` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ, –µ—Å–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –µ—Å—Ç—å –ø–æ–ª–µ ‚ÄúAuthorization‚Äù;
> - `any` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∂–∞—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

`gzip_types`¬†–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ —Å–∂–∞—Ç–∏–µ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ —Ç–∏–ø–∞ —Ç–µ–∫—Å—Ç. –í –¥–∞–Ω–Ω–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∏–ø—ã –æ—Ç–≤–µ—Ç–æ–≤.

`gzip_disable`¬†–∑–∞–ø—Ä–µ—â–∞–µ—Ç –¥–ª—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞ User-Agent —Å–∂–∞—Ç–∏–µ. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–ª—è Internet Explorer 6 —Å–∂–∞—Ç–∏–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–∂–∞—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã.

