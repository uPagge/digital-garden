---
aliases: 
tags:
  - –∑—Ä–µ–ª–æ—Å—Ç—å/üå±
date:
  - - 2024-04-07
zero-link:
  - "[[00 Java —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞]]"
parents: 
linked: 
link: https://struchkov.dev/blog/ru/multiple-connections-to-h2/
---
–ü—Ä–æ–±–ª–µ–º–∞ —Å H2 –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–≥–¥–∞ –∑–∞–ø—É—â–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ë–î.

–ò–º–µ–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```yaml
spring:
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:blog
    password: password
    username: sa
  jpa:
    hibernate:
      ddl-auto: create-drop
    database-platform: org.hibernate.dialect.H2Dialect
```

–í –≤–∞—à–µ–º Spring –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π¬†`@Bean`:

```java
import org.h2.tools.Server;

@Configuration
public class BeanConfig {

    @Bean(initMethod = "start", destroyMethod = "stop")
    public Server inMemoryH2DatabaseaServer() throws SQLException {
        return Server.createTcpServer("-tcp", "-tcpAllowOthers", "-tcpPort", "9090");
    }

}
```

–≠—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ H2.


> [!WARNING] 
> –ï—Å–ª–∏ –∫–ª–∞—Å—Å¬†`org.h2.tools.Server`¬†–Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è, —Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è H2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω scope¬†`runtime`. –£–¥–∞–ª–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ¬†`scope`¬†–∏ –∫–ª–∞—Å—Å –ø–æ—è–≤–∏—Ç—Å—è.

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–¥—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ H2 –∏—Å–ø–æ–ª—å–∑—É—è —Å–ª–µ–¥—É—é—â–∏–π url:

```text
jdbc:h2:tcp://localhost:9090/mem:blog
```

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –≤ —Ç–æ–º, —á—Ç–æ¬†==–Ω–µ–ª—å–∑—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.==